import * as tslib_1 from "tslib";
import { Pipe } from '@angular/core';
import { DateTime } from 'luxon';
var RangeDatePipe = /** @class */ (function () {
    function RangeDatePipe() {
        var _this = this;
        this.days = { 'SU': 'Sun', 'MO': 'Mon', 'TU': 'Tue', 'WE': 'Wed', 'TH': 'Thu', 'FR': 'Fri', 'SA': 'Sat' };
        this.transform = function (rangeDates, isRecurrent, args) {
            if (rangeDates) {
                // for Recurring events
                if (isRecurrent && args['startTime'] != undefined) {
                    var startTime = args['startTime'];
                    var freq = args['recurrenceRuleArray'][0].split(';')[0].split('=')[1];
                    var freqLabel = 'Daily';
                    if (freq.toLowerCase() == 'Weekly'.toLowerCase()) {
                        var byDays = args['recurrenceRuleArray'][0].split(';')[2].split('=')[1].split(',');
                        if (byDays.length > 2) {
                            freqLabel = 'Multiple Dates';
                        }
                        else {
                            freqLabel = 'Every ';
                            for (var index = 0; index < byDays.length; index++) {
                                freqLabel += _this.days[byDays[index]];
                                if (index < (byDays.length - 1)) {
                                    freqLabel += ', ';
                                }
                            }
                        }
                    }
                    return freqLabel + ' | ' + startTime;
                }
                else {
                    // for other events or fallback 
                    var date = rangeDates.map(function (d) { return DateTime.fromISO(d).toFormat('dd'); });
                    var month = rangeDates.map(function (d) { return DateTime.fromISO(d).toFormat('MMM'); });
                    var year = rangeDates.map(function (d) { return DateTime.fromISO(d).toFormat('yy'); });
                    var time = DateTime.fromISO(rangeDates[0]).toFormat('hh:mm a');
                    if (year[0] !== year[1]) {
                        return month[0] + ' ' + date[0] + '\'' + year[0] + ' - ' + month[1] + ' ' + date[1] + '\'' + year[1] + ' | ' + time;
                    }
                    else {
                        if ((date[0] === date[1]) && (month[0] === month[1])) {
                            return month[0] + ' ' + date[0] + ' | ' + time;
                        }
                        else if ((month[0] !== month[1])) {
                            return month[0] + ' ' + date[0] + ' - ' + month[1] + ' ' + date[1] + ' | ' + time;
                        }
                        else {
                            return month[0] + ' ' + date[0] + ' - ' + date[1] + ' | ' + time;
                        }
                    }
                }
            }
            else {
                return null;
            }
        };
    }
    RangeDatePipe = tslib_1.__decorate([
        Pipe({
            name: 'dateRange'
        })
    ], RangeDatePipe);
    return RangeDatePipe;
}());
export { RangeDatePipe };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHMtZGF0ZS1yYW5nZS5waXBlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRvd25zY3JpcHQvY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbInNyYy9hcHAvc2hhcmVkL3BpcGVzL3RzLWRhdGUtcmFuZ2UucGlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLE9BQU8sQ0FBQztBQUtqQztJQUhBO1FBQUEsaUJBbURDO1FBOUNHLFNBQUksR0FBUSxFQUFDLElBQUksRUFBQyxLQUFLLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsQ0FBQztRQUVqRyxjQUFTLEdBQUcsVUFBQyxVQUFlLEVBQUUsV0FBaUIsRUFBRSxJQUFVO1lBQ3ZELElBQUksVUFBVSxFQUFFO2dCQUNaLHVCQUF1QjtnQkFDdkIsSUFBRyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLFNBQVMsRUFBQztvQkFDL0MsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO29CQUNwQyxJQUFNLElBQUksR0FBSyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUMxRSxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUM7b0JBQ3hCLElBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLFFBQVEsQ0FBQyxXQUFXLEVBQUUsRUFBQzt3QkFDOUMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7d0JBQ25GLElBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUM7NEJBQ2pCLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQzt5QkFDaEM7NkJBQU07NEJBQ0wsU0FBUyxHQUFHLFFBQVEsQ0FBQzs0QkFDckIsS0FBSSxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUM7Z0NBQy9DLFNBQVMsSUFBSSxLQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dDQUN0QyxJQUFHLEtBQUssR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUM7b0NBQzdCLFNBQVMsSUFBSSxJQUFJLENBQUM7aUNBQ25COzZCQUNGO3lCQUNGO3FCQUNGO29CQUNELE9BQVEsU0FBUyxHQUFHLEtBQUssR0FBRyxTQUFTLENBQUM7aUJBQ3ZDO3FCQUFNO29CQUNMLGdDQUFnQztvQkFDaEMsSUFBTSxJQUFJLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxVQUFBLENBQUMsSUFBSSxPQUFBLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFsQyxDQUFrQyxDQUFDLENBQUM7b0JBQ3JFLElBQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBbkMsQ0FBbUMsQ0FBQyxDQUFDO29CQUN2RSxJQUFNLElBQUksR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQWxDLENBQWtDLENBQUMsQ0FBQztvQkFDckUsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQ2pFLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDdkIsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUM7cUJBQ3JIO3lCQUFNO3dCQUNMLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7NEJBQ3BELE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQzt5QkFDaEQ7NkJBQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTs0QkFDbEMsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQzt5QkFDbkY7NkJBQU07NEJBQ0wsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUM7eUJBQ2xFO3FCQUNGO2lCQUNGO2FBQ0o7aUJBQU07Z0JBQ0gsT0FBTyxJQUFJLENBQUM7YUFDZjtRQUNMLENBQUMsQ0FBQTtJQUNMLENBQUM7SUFoRFksYUFBYTtRQUh6QixJQUFJLENBQUM7WUFDRixJQUFJLEVBQUUsV0FBVztTQUNwQixDQUFDO09BQ1csYUFBYSxDQWdEekI7SUFBRCxvQkFBQztDQUFBLEFBaERELElBZ0RDO1NBaERZLGFBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcblxuQFBpcGUoe1xuICAgIG5hbWU6ICdkYXRlUmFuZ2UnXG59KVxuZXhwb3J0IGNsYXNzIFJhbmdlRGF0ZVBpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcblxuICAgIGRheXM6IGFueSA9IHsnU1UnOidTdW4nLCdNTyc6ICdNb24nLCdUVSc6ICdUdWUnLCdXRSc6ICdXZWQnLCdUSCc6ICdUaHUnLCdGUic6ICdGcmknLCdTQSc6ICdTYXQnfTtcblxuICAgIHRyYW5zZm9ybSA9IChyYW5nZURhdGVzOiBhbnksIGlzUmVjdXJyZW50PzogYW55ICxhcmdzPzogYW55KTogYW55ID0+IHtcbiAgICAgICAgaWYgKHJhbmdlRGF0ZXMpIHtcbiAgICAgICAgICAgIC8vIGZvciBSZWN1cnJpbmcgZXZlbnRzXG4gICAgICAgICAgICBpZihpc1JlY3VycmVudCAmJiBhcmdzWydzdGFydFRpbWUnXSAhPSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBhcmdzWydzdGFydFRpbWUnXTtcbiAgICAgICAgICAgICAgY29uc3QgZnJlcSAgID0gYXJnc1sncmVjdXJyZW5jZVJ1bGVBcnJheSddWzBdLnNwbGl0KCc7JylbMF0uc3BsaXQoJz0nKVsxXTtcbiAgICAgICAgICAgICAgbGV0IGZyZXFMYWJlbCA9ICdEYWlseSc7XG4gICAgICAgICAgICAgIGlmKGZyZXEudG9Mb3dlckNhc2UoKSA9PSAnV2Vla2x5Jy50b0xvd2VyQ2FzZSgpKXtcbiAgICAgICAgICAgICAgICBsZXQgYnlEYXlzID0gYXJnc1sncmVjdXJyZW5jZVJ1bGVBcnJheSddWzBdLnNwbGl0KCc7JylbMl0uc3BsaXQoJz0nKVsxXS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgIGlmKGJ5RGF5cy5sZW5ndGggPiAyKXtcbiAgICAgICAgICAgICAgICAgICAgZnJlcUxhYmVsID0gJ011bHRpcGxlIERhdGVzJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZnJlcUxhYmVsID0gJ0V2ZXJ5ICc7XG4gICAgICAgICAgICAgICAgICBmb3IobGV0IGluZGV4ID0gMDtpbmRleCA8IGJ5RGF5cy5sZW5ndGg7IGluZGV4Kyspe1xuICAgICAgICAgICAgICAgICAgICBmcmVxTGFiZWwgKz0gdGhpcy5kYXlzW2J5RGF5c1tpbmRleF1dO1xuICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA8IChieURheXMubGVuZ3RoIC0gMSkpe1xuICAgICAgICAgICAgICAgICAgICAgIGZyZXFMYWJlbCArPSAnLCAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiAgZnJlcUxhYmVsICsgJyB8ICcgKyBzdGFydFRpbWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBmb3Igb3RoZXIgZXZlbnRzIG9yIGZhbGxiYWNrIFxuICAgICAgICAgICAgICBjb25zdCBkYXRlID0gcmFuZ2VEYXRlcy5tYXAoZCA9PiBEYXRlVGltZS5mcm9tSVNPKGQpLnRvRm9ybWF0KCdkZCcpKTtcbiAgICAgICAgICAgICAgY29uc3QgbW9udGggPSByYW5nZURhdGVzLm1hcChkID0+IERhdGVUaW1lLmZyb21JU08oZCkudG9Gb3JtYXQoJ01NTScpKTtcbiAgICAgICAgICAgICAgY29uc3QgeWVhciA9IHJhbmdlRGF0ZXMubWFwKGQgPT4gRGF0ZVRpbWUuZnJvbUlTTyhkKS50b0Zvcm1hdCgneXknKSk7XG4gICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlVGltZS5mcm9tSVNPKHJhbmdlRGF0ZXNbMF0pLnRvRm9ybWF0KCdoaDptbSBhJyk7XG4gICAgICAgICAgICAgIGlmICh5ZWFyWzBdICE9PSB5ZWFyWzFdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vbnRoWzBdICsgJyAnICsgZGF0ZVswXSArICdcXCcnICsgeWVhclswXSArICcgLSAnICsgbW9udGhbMV0gKyAnICcgKyBkYXRlWzFdICsgJ1xcJycgKyB5ZWFyWzFdICsgJyB8ICcgKyB0aW1lO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgoZGF0ZVswXSA9PT0gZGF0ZVsxXSkgJiYgKG1vbnRoWzBdID09PSBtb250aFsxXSkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBtb250aFswXSArICcgJyArIGRhdGVbMF0gKyAnIHwgJyArIHRpbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgobW9udGhbMF0gIT09IG1vbnRoWzFdKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vbnRoWzBdICsgJyAnICsgZGF0ZVswXSArICcgLSAnICsgbW9udGhbMV0gKyAnICcgKyBkYXRlWzFdICsgJyB8ICcgKyB0aW1lO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbW9udGhbMF0gKyAnICcgKyBkYXRlWzBdICsgJyAtICcgKyBkYXRlWzFdICsgJyB8ICcgKyB0aW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=